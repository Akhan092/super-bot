<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-sm">
    <h2 class="text-2xl font-bold text-center mb-2">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
    <p class="text-sm text-center text-gray-500 mb-6">–ù–∞—á–Ω–∏—Ç–µ 3-–¥–Ω–µ–≤–Ω—ã–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥</p>

    <form class="space-y-4" onsubmit="return validateForm()">
      <!-- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
        <input id="phone" type="tel" placeholder="+7 (777) 777 77 77" maxlength="18"
               class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:outline-none" value="+7 " />
      </div>

      <!-- –ü–∞—Ä–æ–ª—å -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">–ü–∞—Ä–æ–ª—å</label>
        <div class="relative">
          <input id="password" type="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                 class="w-full border border-gray-300 rounded-lg p-2 pr-10 focus:ring-blue-500 focus:outline-none" />
          <button type="button" onclick="togglePassword()" class="absolute inset-y-0 right-2 flex items-center text-gray-500">
            üëÅÔ∏è
          </button>
        </div>
        <p id="password-error" class="text-red-600 text-sm mt-1 hidden">
          –ü–∞—Ä–æ–ª—å –∫–µ–º—ñ–Ω–¥–µ 6 —Ç–∞“£–±–∞ –±–æ–ª—É—ã, –∞“ì—ã–ª—à—ã–Ω ”ô—Ä—ñ–ø—Ç–µ—Ä—ñ –º–µ–Ω —Å–∞–Ω–¥–∞—Ä–¥–∞–Ω —Ç“±—Ä—É—ã –∫–µ—Ä–µ–∫.
        </p>
      </div>

      <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">–í–æ–π—Ç–∏</button>
    </form>

    <div class="text-sm text-center mt-4 text-blue-600 hover:underline cursor-pointer">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</div>
    <div class="text-sm text-center mt-2">
      –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?
      <a href="register" class="text-blue-600 hover:underline">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
    </div>
  </div>

  <script>
    const phoneInput = document.getElementById('phone');
    const passwordInput = document.getElementById('password');
    const passwordError = document.getElementById('password-error');

    phoneInput.addEventListener('input', function () {
      let digits = this.value.replace(/\D/g, '');
      if (digits.startsWith('7')) digits = digits.slice(1);
      if (digits.length > 10) digits = digits.slice(0, 10);

      let formatted = '+7';
      if (digits.length > 0) formatted += ' (' + digits.slice(0, 3);
      if (digits.length >= 3) formatted += ') ' + digits.slice(3, 6);
      if (digits.length >= 6) formatted += ' ' + digits.slice(6, 8);
      if (digits.length >= 8) formatted += ' ' + digits.slice(8, 10);

      this.value = formatted;
    });

    passwordInput.addEventListener('input', function () {
      this.value = this.value.replace(/[^a-zA-Z0-9]/g, '');
    });

    function togglePassword() {
      passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
    }

    function validateForm() {
      const password = passwordInput.value;
      const isValid = /^[A-Za-z0-9]+$/.test(password) &&
                      /[A-Za-z]/.test(password) &&
                      /\d/.test(password) &&
                      password.length >= 6;

      if (phoneInput.value.length !== 18) {
        alert("–¢–µ–ª–µ—Ñ–æ–Ω –Ω”©–º—ñ—Ä—ñ —Ç–æ–ª—ã“õ –µ–º–µ—Å: +7 (777) 777 77 77");
        return false;
      }

      if (!isValid) {
        passwordError.classList.remove('hidden');
        return false;
      } else {
        passwordError.classList.add('hidden');
        return true;
      }
    }
  </script>

</body>
</html>
