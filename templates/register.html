<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<!-- 1Ô∏è‚É£ –¢—ñ—Ä–∫–µ–ª—É -->
<div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-sm" id="registerForm">
  <h2 class="text-2xl font-bold text-center mb-2">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞–º!</h2>
  <p class="text-sm text-center text-gray-500 mb-6">–ù–∞—á–Ω–∏—Ç–µ 3-–¥–Ω–µ–≤–Ω—ã–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥</p>

  <form class="space-y-4" onsubmit="return sendCode()">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">–ò–º—è</label>
      <input id="firstName" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"
             class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:outline-none" />
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">–§–∞–º–∏–ª–∏—è</label>
      <input id="lastName" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é"
             class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:outline-none" />
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
      <input id="phone" type="tel" placeholder="+7 (777) 777 77 77" maxlength="18"
             class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:outline-none" value="+7 " />
    </div>
    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
  </form>

  <div class="text-sm text-center mt-4">
    –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="index.html" class="text-blue-600 hover:underline">–í–æ–π—Ç–∏</a>
  </div>
</div>

<!-- 2Ô∏è‚É£ –ö–æ–¥ –µ–Ω–≥—ñ–∑—É -->
<div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-sm hidden" id="codeForm">
  <h2 class="text-xl font-semibold text-center mb-4">–ö–æ–¥ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ</h2>
  <p class="text-sm text-center text-gray-600 mb-4">–ö–æ–¥—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:</p>
  <input id="codeInput" type="text" maxlength="6" placeholder="XXXXXX"
         class="w-full border border-gray-300 rounded-lg p-2 mb-4 text-center" />
  <button onclick="verifyCode()" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">–¢–µ–∫—Å–µ—Ä—É</button>
</div>

<!-- 3Ô∏è‚É£ –ü–∞—Ä–æ–ª—å –æ—Ä–Ω–∞—Ç—É -->
<div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-sm hidden" id="passwordForm">
  <h2 class="text-xl font-semibold text-center mb-4">–ñ–∞“£–∞ –ø–∞—Ä–æ–ª—å –æ—Ä–Ω–∞—Ç—ã“£—ã–∑</h2>
  <form class="space-y-4" onsubmit="return savePassword()">
    <div class="relative">
      <label class="block text-sm font-medium text-gray-700 mb-1">–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
      <input id="newPassword" type="password"
             class="w-full border border-gray-300 rounded-lg p-2 pr-10 focus:outline-none" />
      <button type="button" onclick="toggleVisibility('newPassword')" class="absolute right-3 top-9 text-gray-500">üëÅÔ∏è</button>
    </div>

    <div class="relative">
      <label class="block text-sm font-medium text-gray-700 mb-1">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
      <input id="repeatPassword" type="password"
             class="w-full border border-gray-300 rounded-lg p-2 pr-10 focus:outline-none" />
      <button type="button" onclick="toggleVisibility('repeatPassword')" class="absolute right-3 top-9 text-gray-500">üëÅÔ∏è</button>
    </div>

    <p id="password-mismatch" class="text-red-600 text-sm hidden">‚ùå –ü–∞—Ä–æ–ª—å –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç</p>

    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </form>
</div>

<!-- 4Ô∏è‚É£ –°”ô—Ç—Ç—ñ —Ç—ñ—Ä–∫–µ–ª—É -->
<div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-sm hidden" id="successScreen">
  <h2 class="text-xl font-semibold text-center mb-4 text-green-600">‚úÖ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</h2>
  <button onclick="goToLogin()" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">–í–æ–π—Ç–∏</button>
</div>

<!-- üß† JavaScript –ª–æ–≥–∏–∫–∞ -->
<script>
  const phoneInput = document.getElementById('phone');
  const firstNameInput = document.getElementById('firstName');
  const lastNameInput = document.getElementById('lastName');
  const registerForm = document.getElementById('registerForm');
  const codeForm = document.getElementById('codeForm');
  const passwordForm = document.getElementById('passwordForm');
  const successScreen = document.getElementById('successScreen');

  phoneInput.addEventListener('input', function () {
    let digits = this.value.replace(/\D/g, '');
    if (digits.startsWith('7')) digits = digits.slice(1);
    if (digits.length > 10) digits = digits.slice(0, 10);
    let formatted = '+7';
    if (digits.length > 0) formatted += ' (' + digits.slice(0, 3);
    if (digits.length >= 3) formatted += ') ' + digits.slice(3, 6);
    if (digits.length >= 6) formatted += ' ' + digits.slice(6, 8);
    if (digits.length >= 8) formatted += ' ' + digits.slice(8, 10);
    this.value = formatted;
  });

  firstNameInput.addEventListener('input', function () {
    this.value = this.value.replace(/[^a-zA-Z–∞-—è–ê-–Ø—ë–Å—ñ–Ü“£“£“ì“í“Ø“Æ“õ“ö”©”®”ô”ò“ª“∫\s]/g, '');
  });

  lastNameInput.addEventListener('input', function () {
    this.value = this.value.replace(/[^a-zA-Z–∞-—è–ê-–Ø—ë–Å—ñ–Ü“£“£“ì“í“Ø“Æ“õ“ö”©”®”ô”ò“ª“∫\s]/g, '');
  });

  function sendCode() {
    if (firstNameInput.value.length < 2 || lastNameInput.value.length < 2) {
      alert("–ê—Ç—ã –º–µ–Ω —Ç–µ–≥—ñ –¥“±—Ä—ã—Å –µ–Ω–≥—ñ–∑—ñ–ª–≥–µ–Ω—ñ–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑");
      return false;
    }

    if (phoneInput.value.length !== 18) {
      alert("–¢–µ–ª–µ—Ñ–æ–Ω –Ω”©–º—ñ—Ä—ñ —Ç–æ–ª—ã“õ –µ–º–µ—Å: +7 (777) 777 77 77");
      return false;
    }

    registerForm.classList.add('hidden');
    codeForm.classList.remove('hidden');
    alert("–ö–æ–¥ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ: 123456"); // –¥–µ–º–æ
    return false;
  }

  function verifyCode() {
    const code = document.getElementById('codeInput').value;
    if (code === "123456") {
      codeForm.classList.add('hidden');
      passwordForm.classList.remove('hidden');
    } else {
      alert("–ö–æ–¥ –¥“±—Ä—ã—Å –µ–º–µ—Å!");
    }
  }

  function toggleVisibility(id) {
    const input = document.getElementById(id);
    input.type = input.type === 'password' ? 'text' : 'password';
  }

  function savePassword() {
    const newPass = document.getElementById('newPassword').value;
    const repeatPass = document.getElementById('repeatPassword').value;
    const mismatchText = document.getElementById('password-mismatch');

    if (newPass.length < 6 || !/[a-zA-Z]/.test(newPass) || !/\d/.test(newPass)) {
      alert("–ü–∞—Ä–æ–ª—å –∫–µ–º—ñ–Ω–¥–µ 6 —Ç–∞“£–±–∞, ”ô—Ä—ñ–ø –∂”ô–Ω–µ —Å–∞–Ω –±–æ–ª—É—ã –∫–µ—Ä–µ–∫");
      return false;
    }

    if (newPass !== repeatPass) {
      mismatchText.classList.remove("hidden");
      return false;
    } else {
      mismatchText.classList.add("hidden");
    }

    passwordForm.classList.add('hidden');
    successScreen.classList.remove('hidden');
    return false;
  }

  function goToLogin() {
    window.location.href = "index.html";
  }
</script>

</body>
</html>
